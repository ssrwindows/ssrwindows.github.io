<!DOCTYPE html>
<html xml:lang="zh-CN" lang="zh-CN">

<head>
        <link rel="canonical" href="https://ssrwindows.github.io/news/article-43345.htm" />
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Oracle安装 &#8211; shmmax和shmall设置</title>
        <meta name="description" content="在Linux上安装oracle，需要对内核参数进行调整，其中有shmmax和shmall这两个参数，那这两个参数是什么意思，又该如何设置呢？  在oracle的官方文档（https://docs.or" />
        <link rel="icon" href="/assets/website/img/ssrwindows/favicon.ico" type="image/x-icon"/>

    <meta name="author" content="SSR Windows免费节点订阅站">
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://ssrwindows.github.io/news/article-43345.htm" />
    <meta property="og:site_name" content="SSR Windows免费节点订阅站" />
    <meta property="og:title" content="Oracle安装 &#8211; shmmax和shmall设置" />
    <meta property="og:image" content="https://ssrwindows.github.io/uploads/20240730/619573fcc87818026189dbe4c5aca307.webp" />
        <meta property="og:release_date" content="2025-01-20T07:11:21" />
    <meta property="og:updated_time" content="2025-01-20T07:11:21" />
        <meta property="og:description" content="在Linux上安装oracle，需要对内核参数进行调整，其中有shmmax和shmall这两个参数，那这两个参数是什么意思，又该如何设置呢？  在oracle的官方文档（https://docs.or" />
    
    <meta name="applicable-device" content="pc,mobile" />
    <meta name="renderer" content="webkit" />
    <meta name="force-rendering" content="webkit" />
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta name="robots" content="max-image-preview:large" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Oracle安装 &#8211; shmmax和shmall设置">
    <meta name="format-detection" content="telephone=no">

    <link rel="dns-prefetch" href="https:/www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://www.googleadservices.com">
    <link rel="dns-prefetch" href="https://www.google-analytics.com">
    <link rel="dns-prefetch" href="https://pagead2.googlesyndication.com">
    <link rel="dns-prefetch" href="https://cm.g.doubleclick.net">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
    <!-- Vendor CSS Files -->
    <link href="/assets/website/js/frontend/ssrwindows/aos/aos.css" rel="stylesheet">
    <link href="/assets/website/js/frontend/ssrwindows/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/website/js/frontend/ssrwindows/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="/assets/website/js/frontend/ssrwindows/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="/assets/website/js/frontend/ssrwindows/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="/assets/website/js/frontend/ssrwindows/swiper/swiper-bundle.min.css" rel="stylesheet">
    <!-- Template Main CSS File -->
    <link href="/assets/website/css/ssrwindows/style.css" rel="stylesheet">
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RSKEBF5GLS"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RSKEBF5GLS');
</script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3332997411212854"
     crossorigin="anonymous"></script>
</head>

<body data-page="detail">
        <!-- ======= Header ======= -->
    <header id="header" class="fixed-top  header-transparent ">
        <div class="container d-flex align-items-center justify-content-between">
            <div class="logo">
                                <a href="/">SSR Windows</a>
                            </div>
            <nav id="navbar" class="navbar">
                <ul>
                                        <li><a class="nav-link" href="/">首页</a></li>
                                        <li><a class="nav-link" href="/free-nodes/">免费节点</a></li>
                                        <li><a class="nav-link" href="/paid-subscribe/">推荐机场</a></li>
                                        <li><a class="nav-link" href="/news/">新闻资讯</a></li>
                                        <li><a class="nav-link" href="#">关于</a></li>
                    <li><a class="nav-link" href="#">联系</a></li>
                </ul>
                <i class="bi bi-list mobile-nav-toggle"></i>
            </nav><!-- .navbar -->
        </div>
    </header><!-- End Header -->
    <main id="main">
        <!-- ======= Breadcrumbs Section ======= -->
        <section class="breadcrumbs" style="margin-top: 5rem;">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center">
                    <h1>Oracle安装 &#8211; shmmax和shmall设置</h1>
                    <ol>
                        <li><a href="/">首页</a></li>
                        <li><a href="/news/">新闻资讯</a></li>
                        <li>正文</li>
                    </ol>
                </div>
            </div>
        </section><!-- End Breadcrumbs Section -->
        <!-- ======= Details Section ======= -->
        <section id="details" class="details">
            <div class="container">
                <div class="row">
                    <div class="col-md-9">
                                        <input type="hidden" id="share-website-info" data-name="" data-url="">
                  				  				  				</h1> <p>在Linux上安装oracle，需要对内核参数进行调整，其中有shmmax和shmall这两个参数，那这两个参数是什么意思，又该如何设置呢？</p> </h1> <p>在oracle的官方文档（<a href="http://www.m6000.cn/wp-content/themes/begin%20lts/inc/go.php?url=https://docs.oracle.com/en/database/oracle/oracle-database/19/ladbi/minimum-parameter-settings-for-installation.html#GUID-CDEB89D1-4D48-41D9-9AC2-6AD9B0E944E3"  target="_blank" rel="nofollow">https://docs.oracle.com/en/database/oracle/oracle-database/19/ladbi/minimum-parameter-settings-for-installation.html#GUID-CDEB89D1-4D48-41D9-9AC2-6AD9B0E944E3</a> ）中对这两个参数，设置了最小的标准值。<br /><img decoding="async" src="http://img.555519.xyz/uploads3/20220510/9289e97c1498a0a59ff7a24f2bfb3ed1.jpg" alt="Oracle安装 - shmmax和shmall设置"><br /> shmall - Greater than or equal to the value of shmmax, in pages.<br /> shmmax - Half the size of physical memory in bytes. See My Oracle Support Note 567506.1 for additional information about configuring shmmax.</p> <p>再根据redhat的官方文档（<a href="http://www.m6000.cn/wp-content/themes/begin%20lts/inc/go.php?url=https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/performance_tuning_guide/sect-red_hat_enterprise_linux-performance_tuning_guide-configuration_tools-configuring_system_memory_capacity"  target="_blank" rel="nofollow">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/performance_tuning_guide/sect-red_hat_enterprise_linux-performance_tuning_guide-configuration_tools-configuring_system_memory_capacity</a> ），去查这两个参数所表达的含义。<br /><img decoding="async" src="http://img.555519.xyz/uploads3/20220510/d0cafb10717698e4dfa6f4d5713069c2.jpg" alt="Oracle安装 - shmmax和shmall设置"><br /> shmall - Defines the total amount of shared memory pages that can be used on the system at one time. A page is 4096 bytes on the AMD64 and Intel 64 architecture, for example.<br /> shmmax - Defines the maximum size (in bytes) of a single shared memory segment allowed by the kernel.</p> <p>以上两段英文翻译过来：shmmax单个最大共享内存段，shmall同一时刻能使用的所有共享内存页。shmmax最小一半的物理内存，shmall &gt;= shmmax/4096。</p> <p>oracle的sga（Shared Global Area）使用的就是共享内存，共享内存的优势redhat官方文档（<a href="http://www.m6000.cn/wp-content/themes/begin%20lts/inc/go.php?url=https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/5/html/tuning_and_optimizing_red_hat_enterprise_linux_for_oracle_9i_and_10g_databases/chap-oracle_9i_and_10g_tuning_guide-setting_shared_memory#sect-Oracle_9i_and_10g_Tuning_Guide-Setting_Shared_Memory-Setting_SHMMAX_Parameter_"  target="_blank" rel="nofollow">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/5/html/tuning_and_optimizing_red_hat_enterprise_linux_for_oracle_9i_and_10g_databases/chap-oracle_9i_and_10g_tuning_guide-setting_shared_memory#sect-Oracle_9i_and_10g_Tuning_Guide-Setting_Shared_Memory-Setting_SHMMAX_Parameter_</a> ）中也有提及。直白点说就是多进程使用共享内存交流数据最快。例如：服务器进程从磁盘读取数据到sga的buffer cache，dbwn进程从buffer cache将数据写回到磁盘，操作的是同一片内存区域。如果没有共享内存，那么就需要将服务器进程操作的这片内存复制一份到dbwn所操作的内存中去，来完成读取和写入操作。<br /><img decoding="async" src="http://img.555519.xyz/uploads3/20220510/6e013e5bdd2f10c3173f7cb2e3a4ec90.jpg" alt="Oracle安装 - shmmax和shmall设置"><br /> Shared memory allows processes to access common structures and data by placing them in shared memory segments. It is the fastest form of inter-process communication available since no kernel involvement occurs when data is passed between the processes. In fact, data does not need to be copied between the processes.<br /> Oracle uses shared memory segments for the Shared Global Area (SGA) which is an area of memory that is shared by Oracle processes. The size of the SGA has a significant impact to Oracle's performance since it holds database buffer cache and much more.</p> <p>从上面的官方文档我们了解了这两个参数的含义，但是oracle只给了shmmax和shmall的最小值。接下来我们就通过实验来看看这两个参数对oracle的影响。</p> <h2 id="三实验">三、实验</h2> <p>我的实验机器物理内存是1877M，设置SGA_TAEGET为1000M。接下来测试几个场景。</p> <h3 id="a-shmmax-200m-shmall-200m">a. shmmax 200M, shmall 200M</h3> <p>将/etc/sysctl.conf参数设置为<br /> kernel.shmmax = 209715200<br /> kernel.shmall = 51200</p> <p>oracle启动直接报错</p> <pre><code>SQL&gt; startup nomount pfile='/home/oracle/test.ora' ORA-27102: out of memory Linux-x86_64 Error: 28: No space left on device Additional information: 209715200 Additional information: 1</code></pre> <h3 id="b-shmmax-1200m-shmall-200m">b. shmmax 1200M, shmall 200M</h3> <p>将/etc/sysctl.conf参数设置为<br /> kernel.shmmax = 1258291200<br /> kernel.shmall = 51200</p> <p>oracle启动报跟上面一样的错</p> <pre><code>SQL&gt; startup nomount pfile='/home/oracle/test.ora'  ORA-27102: out of memory Linux-x86_64 Error: 28: No space left on device Additional information: 1035993088 Additional information: 1</code></pre> <p>从a和b的实验结果来看，oracle是否能够正常启动跟shmmax参数无关，只与shmall有关。shmall不能设置的比SGA_TAEGET小。</p> <h3 id="c-shmmax-200m-shmall-1200m">c. shmmax 200M, shmall 1200M</h3> <p>将/etc/sysctl.conf参数设置为<br /> kernel.shmmax = 209715200<br /> kernel.shmall = 307200</p> <p>数据库能够正常启动</p> <pre><code>SQL&gt; startup nomount pfile='/home/oracle/test.ora' ORACLE instance started.  Total System Global Area 1043886080 bytes Fixed Size                  2259840 bytes Variable Size             327156864 bytes Database Buffers          708837376 bytes Redo Buffers                5632000 bytes</code></pre> <p>查看共享内存的信息</p> <pre><code>[root@oracletest ~]# ipcs -m  ------ Shared Memory Segments -------- key        shmid      owner      perms      bytes      nattch     status       0x00000000 229376     oracle     640        12582912   18                       0x00000000 262145     oracle     640        209715200  18                       0x00000000 294914     oracle     640        209715200  18                       0x00000000 327683     oracle     640        209715200  18                       0x00000000 360452     oracle     640        209715200  18                       0x00000000 393221     oracle     640        197132288  18                       0x276f5044 425990     oracle     640        2097152    18</code></pre> <p>把上面的共享内存段bytes全部加起来（12582912+209715200...+2097152）/1024/1024=1002MB。可以看到oracle分配内存段的时候，单个共享内存段的确没有超过shmmax（209715200）。总的共享内存刚好等于SGA_TAEGET。</p> <h3 id="d-shmmax-1200m-shmall-1200m">d. shmmax 1200M, shmall 1200M</h3> <p>将/etc/sysctl.conf参数设置为<br /> kernel.shmmax = 1258291200<br /> kernel.shmall = 307200</p> <p>数据库同样能够正常启动</p> <pre><code>SQL&gt; startup nomount pfile='/home/oracle/test.ora' ORACLE instance started.  Total System Global Area 1043886080 bytes Fixed Size                  2259840 bytes Variable Size             327156864 bytes Database Buffers          708837376 bytes Redo Buffers                5632000 bytes</code></pre> <p>查看共享内存的信息</p> <pre><code>[root@oracletest ~]# ipcs -m  ------ Shared Memory Segments -------- key        shmid      owner      perms      bytes      nattch     status       0x00000000 557056     oracle     640        12582912   18                       0x00000000 589825     oracle     640        1035993088 18                       0x276f5044 622594     oracle     640        2097152    18</code></pre> <p>把上面的共享内存段bytes全部加起来（12582912+1035993088+2097152）/1024/1024=1002MB。总的共享内存仍然刚好等于SGA_TAEGET。内存段的数量却只有三个，最大的内存段达到1035993088/1024/1024=988M</p> <h3 id="e-shmmax-2400m-shmall-2400m">e. shmmax 2400M, shmall 2400M</h3> <p>将/etc/sysctl.conf参数设置为<br /> kernel.shmmax = 2516582400<br /> kernel.shmall = 614400</p> <pre><code>SQL&gt; startup nomount pfile='/home/oracle/test.ora' ORACLE instance started.  Total System Global Area 1043886080 bytes Fixed Size                  2259840 bytes Variable Size             327156864 bytes Database Buffers          708837376 bytes Redo Buffers                5632000 bytes</code></pre> <pre><code>[root@oracletest ~]# ipcs -m  ------ Shared Memory Segments -------- key        shmid      owner      perms      bytes      nattch     status       0x00000000 688128     oracle     640        12582912   18                       0x00000000 720897     oracle     640        1035993088 18                       0x276f5044 753666     oracle     640        2097152    18</code></pre> <p>可以看到e跟d没啥区别，shmmax这个值你就算设置超过了物理内存也不受影响。因为oracle实际上分配的共享内存不会超过SGA_TAEGET。</p> <h2 id="四总结">四、总结</h2> <ol> <li>为了让共享内存不至于切分成多个段，建议将shmmax设置比SGA_TAEGET大，shmall=shmmax/4096即可。至于大多少，个人认为随意。</li> </ol> <p>++本人水平有限，特别是对于共享内存这块，我仍然有很多疑问，比如共享内存能否被交换出去？多个共享内存段有什么缺点？暂时就先记录到这里，后面了解之后，再来更新此文。如果有专家看到文章错误，还望指正。++</p> 			                <div class="clearfix"></div>
                <div class="col-md-12 mt-5">
                                        <p>上一个：<a href="/news/article-43344.htm">VUE跨组件数据传递方法详解</a></p>
                                        <p>下一个：<a href="/news/article-43849.htm">动物疫苗那里买（动物疫苗厂家有哪些）</a></p>
                                    </div>
                                    </div>
                    <div class="col-md-3">
                        <div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">热门文章</h3>
    </div>
    <div class="panel-body">
        <ul class="p-0 x-0" style="list-style: none;margin: 0;padding: 0;">
                        <li class="py-2"><a href="/news/article-39365.htm" title="PowerBI开发：用自然语言来探索数据&#8211;Q&amp;A">PowerBI开发：用自然语言来探索数据&#8211;Q&amp;A</a></li>
                        <li class="py-2"><a href="/free-nodes/2025-1-5-free-node-subscribe-links.htm" title="1月5日|Shadowrocket/V2ray/SSR/Clash每天更新22.1M/S免费节点订阅链接，付费节点订阅推荐">1月5日|Shadowrocket/V2ray/SSR/Clash每天更新22.1M/S免费节点订阅链接，付费节点订阅推荐</a></li>
                        <li class="py-2"><a href="/free-nodes/2024-11-23-free-ssr-node.htm" title="11月23日|SSR/V2ray/Shadowrocket/Clash每天更新19.5M/S免费节点订阅链接，付费节点订阅推荐">11月23日|SSR/V2ray/Shadowrocket/Clash每天更新19.5M/S免费节点订阅链接，付费节点订阅推荐</a></li>
                        <li class="py-2"><a href="/news/article-26491.htm" title="养只猫要打什么疫苗（养只猫要打什么疫苗针）">养只猫要打什么疫苗（养只猫要打什么疫苗针）</a></li>
                        <li class="py-2"><a href="/free-nodes/2024-11-29-free-node-subscribe.htm" title="11月29日|Clash/V2ray/SSR/Shadowrocket每天更新19.2M/S免费节点订阅链接，付费节点订阅推荐">11月29日|Clash/V2ray/SSR/Shadowrocket每天更新19.2M/S免费节点订阅链接，付费节点订阅推荐</a></li>
                        <li class="py-2"><a href="/free-nodes/2024-12-14-free-node-subscribe.htm" title="12月14日|V2ray/SSR/Shadowrocket/Clash每天更新21.8M/S免费节点订阅链接，付费节点订阅推荐">12月14日|V2ray/SSR/Shadowrocket/Clash每天更新21.8M/S免费节点订阅链接，付费节点订阅推荐</a></li>
                        <li class="py-2"><a href="/news/article-29283.htm" title="动物可以打狂犬疫苗吗知乎推荐（动物可以打狂犬疫苗吗知乎推荐医生）">动物可以打狂犬疫苗吗知乎推荐（动物可以打狂犬疫苗吗知乎推荐医生）</a></li>
                        <li class="py-2"><a href="/news/article-37399.htm" title="领养宠物协议书范本大全最新 领养宠物协议书范本大全最新版">领养宠物协议书范本大全最新 领养宠物协议书范本大全最新版</a></li>
                        <li class="py-2"><a href="/free-nodes/2025-1-23-free-subscribe-node.htm" title="1月23日|V2ray/SSR/Clash/Shadowrocket每天更新19.7M/S免费节点订阅链接，付费节点订阅推荐">1月23日|V2ray/SSR/Clash/Shadowrocket每天更新19.7M/S免费节点订阅链接，付费节点订阅推荐</a></li>
                        <li class="py-2"><a href="/free-nodes/2024-12-12-free-high-speed-nodes.htm" title="12月12日|Clash/SSR/V2ray/Shadowrocket每天更新20.3M/S免费节点订阅链接，付费节点订阅推荐">12月12日|Clash/SSR/V2ray/Shadowrocket每天更新20.3M/S免费节点订阅链接，付费节点订阅推荐</a></li>
                    </ul>
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">归纳</h3>
    </div>
    <div class="panel-body">
        <ul class="p-0 x-0" style="list-style: none;margin: 0;padding: 0;">
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">69</span> <a href="/date/2025-01/" title="2025-01 归档">2025-01</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">93</span> <a href="/date/2024-12/" title="2024-12 归档">2024-12</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">34</span> <a href="/date/2024-11/" title="2024-11 归档">2024-11</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">25</span> <a href="/date/2024-10/" title="2024-10 归档">2024-10</a></h4>
            </li>
                    </ul>
    </div>
</div>

                    </div>
                </div>
            </div>
        </section><!-- End Details Section -->
    </main><!-- End #main -->
    <!-- ======= Footer ======= -->
<footer id="footer">
    <div class="container py-4">
        <div class="copyright">
                    <p>
                        <a href="/">首页</a> | 
                        <a href="/free-node/">免费节点</a> | 
                        <a href="/news/">新闻资讯</a> |
                        <a href="/about-us.htm">关于我们</a> |
                        <a href="/disclaimer.htm">免责申明</a> |
                        <a href="/privacy.htm">隐私申明</a> |
                        <a href="/sitemap.xml">网站地图</a>
                    </p>
            <a href="/">SSR Windows免费节点订阅站</a> 版权所有 Powered by WordPress
        </div>
    </div>
</footer><!-- End Footer -->
<a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
<!-- Vendor JS Files -->
<script src="/assets/website/js/frontend/ssrwindows/jquery-3.5.1.min.js"></script>
<script src="/assets/website/js/frontend/ssrwindows/aos/aos.js"></script>
<script src="/assets/website/js/frontend/ssrwindows/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/assets/website/js/frontend/ssrwindows/glightbox/js/glightbox.min.js"></script>
<script src="/assets/website/js/frontend/ssrwindows/php-email-form/validate.js"></script>
<script src="/assets/website/js/frontend/ssrwindows/swiper/swiper-bundle.min.js"></script>
<!-- Template Main JS File -->
<script src="/assets/website/js/frontend/ssrwindows/main.js"></script>
<script src="https://www.freeclashnode.com/assets/js/frontend/invite-url.js"></script>
<script src="/assets/website/js/frontend/G.js"></script>
</body>

</html>